{% extends "base.html" %}

{% block title %}Спасибо!{% endblock %}

{% block content %}
<div class="container-xxl">
    <div class="row">
        <!-- Навигация Scrollspy -->
        <div class="col-md-3 mb-4">
            <div id="navbar-scrollspy" class="sticky-top" style="top: 20px;">
                <nav class="nav nav-pills flex-column">
                    <a class="nav-link" href="#common-recommendations">Общие рекомендации</a>
                    <a class="nav-link" href="#details">Детализация</a>
                    <a class="nav-link" href="#mbi">Медико-биологические факторы</a>
                    <a class="nav-link" href="#lifestyle">Двигательная активность, режим дня</a> <!--бывший ФАиРД-->
                    <a class="nav-link" href="#work">Самооценка трудового процесса</a>
                    <a class="nav-link" href="#nutrition">Питание</a>
                    <a class="nav-link" href="#food">Пищевые привычки</a>
                    <a class="nav-link" href="#stress">Стрессоустойчивость</a>
                </nav>
            </div>
        </div>

        <!-- Основной контент -->
        <div class="col-md-9">
            <div data-bs-spy="scroll" data-bs-target="#navbar-scrollspy" data-bs-offset="0" tabindex="0"
                 class="card shadow-sm p-4" style="min-height: 80vh;">

                <h2 class="text-success mb-4 text-center">Спасибо за прохождение анкеты!</h2>

                <!-- Секции с контентом -->
                <section id="common-results" class="mb-5">
                    <div class="alert alert-primary">
                        <h5 class="mb-2">Общая оценка:</h5>
                        <div class="display-6 text-dark mb-2">{{ rating }} уровень соответствия гигиеническим рекомендациям</div>
                        <p class="mb-0">Средний балл: {{ total_score|floatformat:2 }}</p>
                    </div>
                </section>

                <section id="common-recommendations" class="mb-5">
                    <h2 class="text mb-4 text-center">Общие рекомендации</h2>
                    {% include 'partials/common_recommendations.html' %}
                </section>

                <section id="details" class="mb-5">
                    <h2 class="text mb-4 text-center">Детализация</h2>
                    {% include 'partials/details.html' %}
                </section>

                <hr>

                <section id="mbi" class="mb-5">
                    <h2 class="text mb-4 text-center">Медико-биологические факторы</h2>
                    {% include 'partials/mbi.html' %}
                </section>

                <section id="lifestyle" class="mb-5">
                    <h2 class="text mb-4 text-center">Двигательная активность, режим дня</h2>
                    {% include 'partials/lifestyle.html' %}
                </section>

                <section id="work" class="mb-5">
                    <h2 class="text mb-4 text-center">Самооценка трудового процесса</h2>
                    {% include 'partials/work.html' %}
                </section>

                <section id="nutrition" class="mb-5">
                     <h2 class="text mb-4 text-center">Питание</h2>
                    {% include 'partials/nutrition.html' %}
                </section>

                <section id="food" class="mb-5">
                    <h2 class="text mb-4 text-center">Пищевые привычки</h2>
                    {% include 'partials/food.html' %}
                </section>

                <section id="stress" class="mb-5">
                    <h2 class="text mb-4 text-center">Стрессоустойчивость</h2>
                    {% include 'partials/stress.html' %}
                </section>

                <div class="text-center">
                    <a href="/" class="btn btn-primary">Вернуться на главную</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Стили для Scrollspy */
    .nav-pills .nav-link.active {
        background-color: #0d6efd;
        color: white !important;
    }

    .nav-pills .nav-link {
        color: #0d6efd;
        transition: all 0.3s ease;
    }

    section {
        scroll-margin-top: 80px; /* Отступ для фиксированной шапки */
    }

    .sticky-top {
        z-index: 1000;
    }

    @media (max-width: 768px) {
        .row {
            flex-direction: column-reverse;
        }

        #navbar-scrollspy {
            position: static !important;
            margin-bottom: 20px;
        }
    }
</style>
{% endblock %}
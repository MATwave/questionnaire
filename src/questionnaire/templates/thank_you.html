{% extends "base.html" %}

{% block title %}–°–ø–∞—Å–∏–±–æ!{% endblock %}

{% block content %}
<div class="d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="card shadow-sm p-4 text-center" style="max-width: 600px; width: 100%;">
        <h2 class="text-success mb-4">–°–ø–∞—Å–∏–±–æ –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã!</h2>

        <!-- –ë–ª–æ–∫ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ -->
        <div class="results-block mb-4">
            <h4 class="mb-3">–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h4>

            <!-- –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ -->
            <div class="alert alert-primary">
                <h5 class="mb-2">–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:</h5>
                <div class="display-4 text-dark mb-2">{{ rating }}</div>
                <p class="mb-0">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª: {{ total_score|floatformat:2 }}</p>
            </div>

            <!-- –ë–ª–æ–∫ —Å –ò–ú–¢ -->
            <div class="alert alert-secondary mt-3">
                <h5 class="mb-2">üìä –í–∞—à –ò–ú–¢: <span class="badge bg-info">{{ bmi }}</span></h5>
                <div class="risk-info">
                    <p class="fw-bold mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ bmi_category }}</p>
                    <div class="alert alert-{% if '–û–∂–∏—Ä–µ–Ω–∏–µ' in bmi_category %}danger
                                           {% elif '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å' in bmi_category %}warning
                                           {% else %}success{% endif %} mt-2">
                        <h6>–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: {{ bmi_risk_level }}</h6>
                        <p class="mb-0 small">{{ bmi_risk_description }}</p>
                    </div>
                </div>
            </div>

                        <!-- –ë–ª–æ–∫ —Å –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è–º–∏ -->
            {% if existing_diseases != '–ù–µ—Ç' %}
            <div class="alert alert-warning mt-3">
                <h5 class="mb-2">üè• –ò–º–µ—é—â–∏–µ—Å—è –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è:</h5>
                <ul class="list-unstyled">
                    {% for disease in existing_diseases %}
                        <li>
                            <i class="bi bi-arrow-right-short text-danger"></i>
                            {{ disease }}
                        </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <!-- –ë–ª–æ–∫ —Å —Ç–∞–ª–∏–µ–π/–±–µ–¥—Ä–∞–º–∏ -->
            <div class="alert alert-info mt-3">
                <h5 class="mb-3">üìè –ê–Ω—Ç—Ä–æ–ø–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</h5>

                <!-- –û–∫—Ä—É–∂–Ω–æ—Å—Ç—å —Ç–∞–ª–∏–∏ -->
                <div class="mb-3">
                    <h6>–û–∫—Ä—É–∂–Ω–æ—Å—Ç—å —Ç–∞–ª–∏–∏: {{ waist|default:"–Ω–µ —É–∫–∞–∑–∞–Ω–∞" }} —Å–º</h6>
                    {% if waist_status %}
                        <div class="alert alert-{% if waist_status == '–ù–æ—Ä–º–∞' %}success{% else %}warning{% endif %}">
                            <strong>–°—Ç–∞—Ç—É—Å:</strong> {{ waist_status }}<br>
                            {{ waist_description }}
                        </div>
                    {% endif %}
                </div>

                <!-- –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç–∞–ª–∏—è/–±–µ–¥—Ä–æ -->
                <div class="mb-3">
                    <h6>–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç–∞–ª–∏—è/–±–µ–¥—Ä–æ:
                        {% if waist_hip_ratio %}
                            {{ waist_hip_ratio|floatformat:2 }}
                            <small class="text-muted">
                                (–¢–∞–ª–∏—è: {{ waist|floatformat }} —Å–º / –ë–µ–¥—Ä–∞: {{ hip|floatformat }} —Å–º)
                            </small>
                        {% else %}
                            –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ
                        {% endif %}
                    </h6>
                    {% if ratio_status %}
                        <div class="alert alert-{% if ratio_status == '–ù–æ—Ä–º–∞' %}success{% else %}warning{% endif %}">
                            <strong>–°—Ç–∞—Ç—É—Å:</strong> {{ ratio_status }}<br>
                            {{ ratio_description }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- –ë–ª–æ–∫ —Å –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–º –¥–∞–≤–ª–µ–Ω–∏–µ–º -->
            <div class="alert alert-info mt-3">
                <h5 class="mb-3">‚ù§Ô∏è –ê—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ</h5>

                <div class="mb-3">
                    {% if bp_status == 'unknown' %}
                        <div class="alert alert-warning">
                            {{ bp_description }}
                        </div>
                    {% else %}
                        <h6>
                            –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏: {{ bp_data.systolic }}/{{ bp_data.diastolic }} –º–º —Ä—Ç.—Å—Ç.
                        </h6>
                        <div class="alert alert-{% if bp_status == 'high' %}danger{% elif bp_status == 'elevated' %}warning{% else %}success{% endif %}">
                            <strong>–°—Ç–∞—Ç—É—Å:</strong>
                            {% if bp_status == 'high' %}–í—ã—Å–æ–∫–æ–µ
                            {% elif bp_status == 'elevated' %}–ü–æ–≤—ã—à–µ–Ω–Ω–æ–µ
                            {% else %}–ù–æ—Ä–º–∞–ª—å–Ω–æ–µ{% endif %}<br>
                            {{ bp_description }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- –ë–ª–æ–∫ —Å —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω–æ–º -->
            <div class="alert alert-info mt-3">
                <h5 class="mb-3">ü©∏ –û–±—â–∏–π —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω</h5>

                <div class="mb-3">
                    {% if cholesterol_unknown %}
                        <div class="alert alert-warning">
                            –ï—Å–ª–∏ –í–∞–º –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –í–∞—à —É—Ä–æ–≤–µ–Ω—å –æ–±—â–µ–≥–æ —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–π—Ç–∏ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
                            –∏ –∏–∑—É—á–∏—Ç—å ¬´–ª–∏–ø–∏–¥–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å¬ª –∫—Ä–æ–≤–∏.
                        </div>
                    {% else %}
                        <h6>
                            –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å:
                            {% if cholesterol_value %}
                                {{ cholesterol_value|floatformat:1 }} –º–º–æ–ª—å/–ª
                            {% else %}
                                –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö
                            {% endif %}
                        </h6>
                        {% if cholesterol_status == 'high' %}
                            <div class="alert alert-danger">
                                <strong>–°—Ç–∞—Ç—É—Å:</strong> –í—ã—Å–æ–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ<br>
                                –£ –í–∞—Å –≤—ã—Å–æ–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω–∞ (>5.5 –º–º–æ–ª—å/–ª).
                                –ó–Ω–∞—á–µ–Ω–∏–µ –Ω–∏–∂–µ 5.2 –º–º–æ–ª—å/–ª —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º –¥–ª—è –ø–æ–ø—É–ª—è—Ü–∏–∏ —Å –Ω–∏–∑–∫–∏–º —Ä–∏—Å–∫–æ–º.
                            </div>
                        {% else %}
                            <div class="alert alert-success">
                                <strong>–°—Ç–∞—Ç—É—Å:</strong> –ù–æ—Ä–º–∞–ª—å–Ω—ã–π<br>
                                –í–∞—à —É—Ä–æ–≤–µ–Ω—å —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
                            </div>
                        {% endif %}
                    {% endif %}
                </div>
            </div>

            <!-- –ë–ª–æ–∫ —Å –≥–ª—é–∫–æ–∑–æ–π -->
            <div class="alert alert-info mt-3">
                <h5 class="mb-3">ü©∏ –£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã</h5>
                <div class="mb-3">
                    {% if glucose_unknown or glucose_value == 0 %}
                        <div class="alert alert-warning">
                            <strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong><br>
                            –ó–Ω–∞—á–µ–Ω–∏–µ –≥–ª—é–∫–æ–∑—ã –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–ª–∏ —Ä–∞–≤–Ω–æ 0. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–∞—Ç—å –∞–Ω–∞–ª–∏–∑:<br>
                            - –ö–∞–ø–∏–ª–ª—è—Ä–Ω–∞—è –∫—Ä–æ–≤—å: ‚â§5.6 –º–º–æ–ª—å/–ª<br>
                            - –í–µ–Ω–æ–∑–Ω–∞—è –∫—Ä–æ–≤—å: ‚â§6.1 –º–º–æ–ª—å/–ª
                        </div>
                    {% else %}
                        <h6>–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å: {{ glucose_value|floatformat:1 }} –º–º–æ–ª—å/–ª</h6>
                        <div class="alert
                            {% if glucose_status == 'diabetes' %}alert-danger
                            {% elif glucose_status == 'prediabetes' %}alert-warning
                            {% else %}alert-success{% endif %}">
                            <strong>–°—Ç–∞—Ç—É—Å:</strong>
                            {% if glucose_status == 'diabetes' %}–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –¥–∏–∞–±–µ—Ç–∞
                            {% elif glucose_status == 'prediabetes' %}–ü—Ä–µ–¥–∏–∞–±–µ—Ç
                            {% else %}–ù–æ—Ä–º–∞{% endif %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
            <div class="mt-3">
                {% if rating == "–ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–∞—è" %}
                <div class="alert alert-danger">
                    <h5 class="mb-2">üö® –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h5>
                    <ul class="text-start">
                        <li>–ü—Ä–æ–π—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é —É –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</li>
                        <li>–ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∂–∏–º –ø–∏—Ç–∞–Ω–∏—è –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li>
                        <li>–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π</li>
                        <li>–ò—Å–∫–ª—é—á–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞</li>
                    </ul>
                </div>
                {% elif rating == "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–∞—è" %}
                <div class="alert alert-warning">
                    <h5 class="mb-2">‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h5>
                    <ul class="text-start">
                        <li>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º —Ç—Ä—É–¥–∞ –∏ –æ—Ç–¥—ã—Ö–∞</li>
                        <li>–£–≤–µ–ª–∏—á–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</li>
                        <li>–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Ü–∏–æ–Ω –ø–∏—Ç–∞–Ω–∏—è</li>
                        <li>–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 2 –º–µ—Å—è—Ü–∞</li>
                    </ul>
                </div>
                {% elif rating == "–•–æ—Ä–æ—à–∞—è" %}
                <div class="alert alert-info">
                    <h5 class="mb-2">üëç –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h5>
                    <ul class="text-start">
                        <li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</li>
                        <li>–ü—Ä–æ–≤–µ—Å—Ç–∏ —É–≥–ª—É–±–ª–µ–Ω–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É</li>
                        <li>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏</li>
                        <li>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤</li>
                    </ul>
                </div>
                {% else %}
                <div class="alert alert-success">
                    <h5 class="mb-2">üéâ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h5>
                    <ul class="text-start">
                        <li>–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é</li>
                        <li>–î–µ–ª–∏—Ç—å—Å—è –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º –æ–ø—ã—Ç–æ–º</li>
                        <li>–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ 1 —Ä–∞–∑ –≤ –≥–æ–¥</li>
                        <li>–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–∞</li>
                    </ul>
                </div>
                {% endif %}
            </div>

            <!-- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π -->
            <div class="mt-3 text-start">
                <h5 class="mb-3">–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è:</h5>
                <ul class="list-group">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        –ú–µ–¥–∏–∫–æ-–±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã
                        <span class="badge bg-primary rounded-pill">{{ medico_biological_avg|floatformat:2 }}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        –°—Ç—Ä–µ—Å—Å
                        <span class="badge bg-primary rounded-pill">{{ stress_avg|floatformat:2 }}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        –ü–∏—Ç–∞–Ω–∏–µ
                        <span class="badge bg-primary rounded-pill">{{ nutrition_avg|floatformat:2 }}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        –ü–∏—â–µ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
                        <span class="badge bg-primary rounded-pill">{{ eating_behavior_avg|floatformat:2 }}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–∞
                        <span class="badge bg-primary rounded-pill">{{ work_assessment_avg|floatformat:2 }}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        –û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ –∏ –§–ê–∏–†–î
                        <span class="badge bg-primary rounded-pill">{{ lifestyle_avg|floatformat:2 }}</span>
                    </li>
                </ul>
            </div>
        </div>

        <a href="/" class="btn btn-primary mt-3">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>

<style>
    .results-block {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        border: 1px solid #eee;
    }

    .display-4 {
        font-size: 2.5rem;
        font-weight: 300;
        line-height: 1.2;
    }

    .badge.rounded-pill {
        font-size: 0.9em;
        min-width: 50px;
    }

    .alert ul {
        margin-bottom: 0;
        padding-left: 1.5rem;
    }

    .alert li {
        margin: 0.3rem 0;
    }

    .alert-secondary {
        background: #f8f9fa;
        border-color: #dee2e6;
    }
</style>
{% endblock %}